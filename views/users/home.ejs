<%- include("../partials/userpartials/header.ejs")  %>


<style>
    /* Offer Badge with Percentage */
    .badge-danger {
        position: absolute;
        top: 10px;
        right: 10px;
        background-color: #d9534f;
        color: white;
        padding: 5px 10px;
        border-radius: 5px;
        font-size: 0.8rem;
        font-weight: bold;
    }

    /* Ensure the percentage and label fit well */
    .badge-danger::after {
        content: ' OFF';
    }

    /* Additional Product Hover Effects */
    .isotope-item:hover {
        transform: translateY(-10px); /* Slight elevation on hover */
    }

    .product-image {
        width: 100%;
        height: auto;
        transition: transform 0.3s ease, box-shadow 0.3s ease;
    }

    .block2-pic:hover .product-image {
        transform: scale(1.05);
        box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);
    }

    .discount-price {
        color: #d9534f;
        font-weight: bold;
        font-size: 1.1rem;
    }

    .original-price {
        color: #999;
        font-size: 0.9rem;
    }

    .off-class {
        text-decoration: line-through;
    }

    .product-name {
        font-size: 1rem;
        font-weight: 600;
        color: #333;
        transition: color 0.3s ease;
    }

    .product-name:hover {
        color: #d9534f;
    }

    .icon-heart1 {
        transition: opacity 0.3s ease;
    }

    .icon-heart2 {
        position: absolute;
        top: 0;
        left: 0;
        opacity: 0;
        transition: opacity 0.3s ease;
    }

    .js-addwish-b2:hover .icon-heart1 {
        opacity: 0;
    }

    .js-addwish-b2:hover .icon-heart2 {
        opacity: 1;
    }

</style>

<!-- Slider -->
<section class="section-slide">
    <div class="wrap-slick1">
        <div class="slick1">
            <div class="item-slick1" style="background-image: url(images/slide-01.jpg);">
                <div class="container h-full">
                    <div class="flex-col-l-m h-full p-t-100 p-b-30 respon5">
                        <div class="layer-slick1 animated visible-false" data-appear="fadeInDown" data-delay="0">
                            <span class="ltext-101 cl2 respon2">
                                Women Collection 2018
                            </span>
                        </div>
                            
                        <div class="layer-slick1 animated visible-false" data-appear="fadeInUp" data-delay="800">
                            <h2 class="ltext-201 cl2 p-t-19 p-b-43 respon1">
                                NEW SEASON
                            </h2>
                        </div>
                            
                        <div class="layer-slick1 animated visible-false" data-appear="zoomIn" data-delay="1600">
                            <a href="product.html" class="flex-c-m stext-101 cl0 size-101 bg1 bor1 hov-btn1 p-lr-15 trans-04">
                                Shop Now
                            </a>
                        </div>
                    </div>
                </div>
            </div>

            <div class="item-slick1" style="background-image: url(images/slide-02.jpg);">
                <div class="container h-full">
                    <div class="flex-col-l-m h-full p-t-100 p-b-30 respon5">
                        <div class="layer-slick1 animated visible-false" data-appear="rollIn" data-delay="0">
                            <span class="ltext-101 cl2 respon2">
                                Men New-Season
                            </span>
                        </div>
                            
                        <div class="layer-slick1 animated visible-false" data-appear="lightSpeedIn" data-delay="800">
                            <h2 class="ltext-201 cl2 p-t-19 p-b-43 respon1">
                                Jackets & Coats
                            </h2>
                        </div>
                            
                        <div class="layer-slick1 animated visible-false" data-appear="slideInUp" data-delay="1600">
                            <a href="product.html" class="flex-c-m stext-101 cl0 size-101 bg1 bor1 hov-btn1 p-lr-15 trans-04">
                                Shop Now
                            </a>
                        </div>
                    </div>
                </div>
            </div>

            <div class="item-slick1" style="background-image: url(images/slide-03.jpg);">
                <div class="container h-full">
                    <div class="flex-col-l-m h-full p-t-100 p-b-30 respon5">
                        <div class="layer-slick1 animated visible-false" data-appear="rotateInDownLeft" data-delay="0">
                            <span class="ltext-101 cl2 respon2">
                                Men Collection 2018
                            </span>
                        </div>
                            
                        <div class="layer-slick1 animated visible-false" data-appear="rotateInUpRight" data-delay="800">
                            <h2 class="ltext-201 cl2 p-t-19 p-b-43 respon1">
                                New arrivals
                            </h2>
                        </div>
                            
                        <div class="layer-slick1 animated visible-false" data-appear="rotateIn" data-delay="1600">
                            <a href="product.html" class="flex-c-m stext-101 cl0 size-101 bg1 bor1 hov-btn1 p-lr-15 trans-04">
                                Shop Now
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>


<!-- Banner -->
<div class="sec-banner bg0 p-t-80 p-b-50">
    <div class="container">
        <div class="row">
            <div class="col-md-6 col-xl-6 p-b-30 m-lr-auto">
                <!-- Block1 -->
                <div class="block1 wrap-pic-w">
                    <img src="images/banner-01.jpg" alt="IMG-BANNER">

                    <a href="/women-products" class="block1-txt ab-t-l s-full flex-col-l-sb p-lr-38 p-tb-34 trans-03 respon3">
                        <div class="block1-txt-child1 flex-col-l">
                            <span class="block1-name ltext-102 trans-04 p-b-8">
                                Women
                            </span>

                            <span class="block1-info stext-102 trans-04">
                                Spring 2018
                            </span>
                        </div>

                        <div class="block1-txt-child2 p-b-4 trans-05">
                            <div class="block1-link stext-101 cl0 trans-09">
                                Shop Now
                            </div>
                        </div>
                    </a>
                </div>
            </div>

            <div class="col-md-6 col-xl-6 p-b-30 m-lr-auto">
                <!-- Block1 -->
                <div class="block1 wrap-pic-w">
                    <img src="images/banner-02.jpg" alt="IMG-BANNER">

                    <a href="/men-products" class="block1-txt ab-t-l s-full flex-col-l-sb p-lr-38 p-tb-34 trans-03 respon3">
                        <div class="block1-txt-child1 flex-col-l">
                            <span class="block1-name ltext-102 trans-04 p-b-8">
                                Men
                            </span>

                            <span class="block1-info stext-102 trans-04">
                                Spring 2018
                            </span>
                        </div>

                        <div class="block1-txt-child2 p-b-4 trans-05">
                            <div class="block1-link stext-101 cl0 trans-09">
                                Shop Now
                            </div>
                        </div>
                    </a>
                </div>
            </div>
        </div>
    </div>
</div>


<!-- Product -->
<section class="bg0 p-t-23 p-b-140">
    <div class="container">
        <div class="p-b-10">
            <h3 class="ltext-103 cl5">
                Product Overview
            </h3>
        </div>



         
        <div class="row isotope-grid" id="productContainer">
            <% variants.forEach(variant => { %>
            <div class="col-sm-6 col-md-4 col-lg-3 p-b-35 isotope-item <%= variant.productId.categoryId.gender %>">
                <div class="block2">
                    <div class="block2-pic hov-img0">
                        <a href="/productDetail?variantId=<%= variant._id %>">
                            <img src="images/<%= variant.image[0] %>" alt="IMG-PRODUCT" class="product-image">
                        </a>
        
                        <!-- Calculate and Display Offer Badge with Correct Discount Percentage -->
                        <% if (variant.productOfferPrice || variant.categoryOfferPrice) { %>
                            <% 
                                let discountPrice;
                                let discountPercentage;
        
                                // Determine the correct offer price to use
                                if (!variant.productOfferPrice) {
                                    // Only category offer exists
                                    discountPrice = variant.categoryOfferPrice;
                                    discountPercentage = Math.round(((variant.price - discountPrice) / variant.price) * 100);
                                } else if (!variant.categoryOfferPrice) {
                                    // Only product offer exists
                                    discountPrice = variant.productOfferPrice;
                                    discountPercentage = Math.round(((variant.price - discountPrice) / variant.price) * 100);
                                } else {
                                    // Both exist, choose the lower offer price
                                    discountPrice = Math.min(variant.productOfferPrice, variant.categoryOfferPrice);
                                    discountPercentage = Math.round(((variant.price - discountPrice) / variant.price) * 100);
                                }
                            %>
                            <% if (discountPercentage > 0) { %>
                                <span class="badge badge-danger"><%= discountPercentage %>% </span>
                            <% } %>
                        <% } %>
                    </div>
        
                    <div class="block2-txt flex-w flex-t p-t-14">
                        <div class="block2-txt-child1 flex-col-l">
                            <a href="/productDetail?variantId=<%= variant._id %>" class="stext-104 cl4 hov-cl1 trans-04 js-name-b2 p-b-6 product-name">
                                <%= variant.productId.name %>
                            </a>
        
                            <!-- Price Section -->
                            <% if (!variant.productOfferPrice && !variant.categoryOfferPrice) { %>
                                <span class="stext-105 cl3 original-price">₹ <%= variant.price %></span>
                            <% } else if (!variant.productOfferPrice) { %>
                                <span class="stext-105 cl3 discount-price">₹ <%= variant.categoryOfferPrice %></span>
                                <span class="original-price strike-through off-class">₹ <%= variant.price %></span>
                            <% } else if (!variant.categoryOfferPrice) { %>
                                <span class="stext-105 cl3 discount-price">₹ <%= variant.productOfferPrice %></span>
                                <span class="original-price strike-through off-class">₹ <%= variant.price %></span>
                            <% } else { %>
                                <% 
                                    let finalPrice = Math.min(variant.productOfferPrice, variant.categoryOfferPrice);
                                %>
                                <span class="stext-105 cl3 discount-price">₹ <%= finalPrice %></span>
                                <span class="original-price strike-through off-class">₹ <%= variant.price %></span>
                            <% } %>
                        </div>
        
                        <div class="block2-txt-child2 flex-r p-t-3">
                            <!-- Wishlist Button -->
                            <a href="#" class="btn-addwish-b2 dis-block pos-relative js-addwish-b2">
                                <img class="icon-heart1 dis-block trans-04" src="images/icons/icon-heart-01.png" alt="ICON">
                                <img class="icon-heart2 dis-block trans-04 ab-t-l" src="images/icons/icon-heart-02.png" alt="ICON">
                            </a>
                        </div>
                    </div>
                </div>
            </div>
            <% }) %>
        </div>

    </div>
</section>



<%- include("../partials/userpartials/footer.ejs") %>