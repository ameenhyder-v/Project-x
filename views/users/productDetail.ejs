<%- include("../partials/userpartials/header.ejs") %>

<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

<style>

    .wrap-pic-w {
        position: relative;
        display: inline-block; /* Keep the image inline */
    }
    
    .zoom-image {
        width: 100%; /* Responsive image */
        height: auto; /* Maintain aspect ratio */
    }
    
    .zoom-lens {
        position: absolute;
        border: 2px solid #000; /* Lens border color */
        cursor: none; /* Hide cursor when over lens */
        display: none; /* Hide lens initially */
        width: 200px; /* Size of the zoom lens */
        height: 200px; /* Size of the zoom lens */
        pointer-events: none; /* Disable interactions with the lens */
    }
    
    
</style>

<!-- breadcrumb -->
<div class="container">
    <div class="bread-crumb flex-w p-l-25 p-r-15 p-t-30 p-lr-0-lg">
        <a href="/" class="stext-109 cl8 hov-cl1 trans-04">
            Home
            <i class="fa fa-angle-right m-l-9 m-r-10" aria-hidden="true"></i>
        </a>

        <a href="/men-products" class="stext-109 cl8 hov-cl1 trans-04">
            Men
            <i class="fa fa-angle-right m-l-9 m-r-10" aria-hidden="true"></i>
        </a>

        <span class="stext-109 cl4">
            <%= variant.productId.name %>
        </span>
    </div>
</div>

<!-- Product Detail -->
<section class="sec-product-detail bg0 p-t-65 p-b-60">
    <div class="container">
        <div class="row">
            <!-- Product Image Section -->
            <div class="col-md-6 col-lg-7 p-b-30">
                <div class="p-l-25 p-r-30 p-lr-0-lg">
                    <div class="wrap-slick3 flex-sb flex-w">
                        <div class="wrap-slick3-dots"></div>
                        <div class="wrap-slick3-arrows flex-sb-m flex-w"></div>

                        <div class="slick3 gallery-lb">
                            <% variant.image.map(element => { %>
                            <div class="item-slick3" data-thumb="/images/<%= element %>">
                                <div class="wrap-pic-w pos-relative">
                                    <img class="zoom-image" src="/images/<%= element %>" alt="IMG-PRODUCT">
                                    <div class="zoom-lens"></div>
                                    <a class="flex-c-m size-1080 how-pos1 bor0 fs-16 cl10 bg0 hov-btn3 trans-04" href="/images/<%= element %>">
                                        <i class="fa fa-expand"></i>
                                    </a>
                                </div>
                                
                                
                            </div>
                            <% }) %>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Product Info Section -->
            <div class="col-md-6 col-lg-5 p-b-30">
                <div class="p-r-50 p-t-5 p-lr-0-lg">
                    <!-- Product Name -->
                    <h4 class="mtext-105 cl2 js-name-detail p-b-14">
                        <%= variant.productId.name %>
                    </h4>

                    <!-- Price & Discount Section -->
                    <div class="mtext-106 cl2">
                        <% 
                            const discountPrice = Math.min(variant.categoryOfferPrice || variant.price, variant.productOfferPrice || variant.price);
                            const hasOffer = variant.categoryOfferPrice || variant.productOfferPrice; 
                        %>
                        <span id="productPrice" class="mtext-106 cl2">
                            <% if (hasOffer) { %>
                                <span style="text-decoration: line-through; color: red;">₹ <%= variant.price %></span>
                                <span style="color: green;">₹ <%= discountPrice %></span>
                            <% } else { %>
                                <span>₹ <%= variant.price %></span>
                            <% } %>
                        </span>
                        <% if (hasOffer) {
                            const discountPercentage = Math.round(((variant.price - discountPrice) / variant.price) * 100);
                            if (discountPercentage > 0) { %>
                                <p class="stext-102 cl3 p-t-10" style="color: orange;">
                                    Save <%= discountPercentage %>% off!
                                </p>
                            <% }
                        } %>

                    </div>

                    <!-- Product Description -->
                    <p class="stext-102 cl3 p-t-23">
                        <%= variant.productId.description %>
                    </p>

                    <!-- Size and Color Options -->
                    <div class="p-t-33">
                        <div class="flex-w flex-r-m p-b-10">
                            <div class="size-203 flex-c-m respon6">Size</div>
                            <div class="size-204 respon6-next">
                                <div class="rs1-select2 bor8 bg0">
                                    <select class="js-select2" id="productSelect" name="size" onchange="changePrice()">
                                        <% variant.stock.forEach(element => { %>
                                            <option value="<%= element.size %>" data-quantity="<%= element.quantity %>">
                                                <%= element.size %>
                                            </option>
                                        <% }) %>
                                    </select>
                                    <div class="dropDownSelect2"></div>
                                </div>
                            </div>
                        </div>

                        <div class="flex-w flex-r-m p-b-10">
                            <div class="size-203 flex-c-m respon6">Color</div>
                            <div class="size-204 respon6-next">
                                <div class="rs1-select2 bor8 bg0">
                                    <select class="js-select2" name="color" id="colorSelect" onchange="changeColor()">
                                        <option selected><%= variant.color %></option>
                                        <% variants.forEach(element => { %>
                                            <% if (element.color !== variant.color) { %>
                                                <option data-param="<%= element._id %>"><%= element.color %></option>
                                            <% } %>
                                        <% }) %>
                                    </select>
                                    <div class="dropDownSelect2"></div>
                                </div>
                            </div>
                        </div>

                        <!-- Add to Cart and Stock Message -->
                        <div class="flex-w flex-r-m p-b-10">
                            <div class="size-204 flex-w flex-m respon6-next">
                                <button onclick="addToCart('<%= variant._id %>')" class="flex-c-m stext-101 cl0 size-101 bg1 bor1 hov-btn1 p-lr-15 trans-04 js-addcart-detail">
                                    Add to cart
                                </button>
                                <p id="outOfStockMessage" style="color: red; display: none;">This size is out of stock</p>
                            </div>
                        </div>
                    </div>

                    <!-- Wishlist and Social Sharing -->
                    <div class="flex-w flex-m p-l-100 p-t-40 respon7">
                        <div class="flex-m bor9 p-r-10 m-r-11">
                            <% let isInWishlist = wishList && wishList.wishlistItems.includes(variant._id.toString()); %>
                            <button onclick="addToWishOrRemove('<%= variant._id %>', event)" class="fs-14 cl3 hov-cl1 trans-04 lh-10 p-lr-5 p-tb-2" data-tooltip="<%= isInWishlist ? 'Remove from Wishlist' : 'Add to Wishlist' %>">
                                <i class="zmdi zmdi-favorite" style="color: <%= isInWishlist ? 'red' : '' %>"></i>
                            </button>
                        </div>
                        <a href="#" class="fs-14 cl3 hov-cl1 trans-04 lh-10 p-lr-5 p-tb-2 m-r-8 tooltip100" data-tooltip="Facebook">
                            <i class="fa fa-facebook"></i>
                        </a>
                        <a href="#" class="fs-14 cl3 hov-cl1 trans-04 lh-10 p-lr-5 p-tb-2 m-r-8 tooltip100" data-tooltip="Twitter">
                            <i class="fa fa-twitter"></i>
                        </a>
                        <a href="#" class="fs-14 cl3 hov-cl1 trans-04 lh-10 p-lr-5 p-tb-2 m-r-8 tooltip100" data-tooltip="Google Plus">
                            <i class="fa fa-google-plus"></i>
                        </a>
                    </div>
                </div>
            </div>
        </div>
    


        <div class="bor10 m-t-50 p-t-43 p-b-40">
            <!-- Tab01 -->
            <div class="tab01">
                <!-- Nav tabs -->
                <ul class="nav nav-tabs" role="tablist">
                    <li class="nav-item p-b-10">
                        <a class="nav-link active" data-toggle="tab"
                            href="#description" role="tab">Description</a>
                    </li>

                    <li class="nav-item p-b-10">
                        <a class="nav-link" data-toggle="tab"
                            href="#information" role="tab">Additional
                            information</a>
                    </li>

                    <li class="nav-item p-b-10">
                        <a class="nav-link" data-toggle="tab" href="#reviews"
                            role="tab">Reviews (1)</a>
                    </li>
                </ul>

                <!-- Tab panes -->
                <div class="tab-content p-t-43">
                    <!-- - -->
                    <div class="tab-pane fade show active" id="description"
                        role="tabpanel">
                        <div class="how-pos2 p-lr-15-md">
                            <p class="stext-102 cl6">
                                Aenean sit amet gravida nisi. Nam fermentum est
                                felis, quis feugiat nunc fringilla sit amet. Ut
                                in blandit ipsum. Quisque luctus dui at ante
                                aliquet, in hendrerit lectus interdum. Morbi
                                elementum sapien rhoncus pretium maximus. Nulla
                                lectus enim, cursus et elementum sed, sodales
                                vitae eros. Ut ex quam, porta consequat interdum
                                in, faucibus eu velit. Quisque rhoncus ex ac
                                libero varius molestie. Aenean tempor sit amet
                                orci nec iaculis. Cras sit amet nulla libero.
                                Curabitur dignissim, nunc nec laoreet consequat,
                                purus nunc porta lacus, vel efficitur tellus
                                augue in ipsum. Cras in arcu sed metus rutrum
                                iaculis. Nulla non tempor erat. Duis in egestas
                                nunc.
                            </p>
                        </div>
                    </div>

                    <!-- - -->
                    <div class="tab-pane fade" id="information" role="tabpanel">
                        <div class="row">
                            <div class="col-sm-10 col-md-8 col-lg-6 m-lr-auto">
                                <ul class="p-lr-28 p-lr-15-sm">
                                    <li class="flex-w flex-t p-b-7">
                                        <span class="stext-102 cl3 size-205">
                                            Weight
                                        </span>

                                        <span class="stext-102 cl6 size-206">
                                            0.79 kg
                                        </span>
                                    </li>

                                    <li class="flex-w flex-t p-b-7">
                                        <span class="stext-102 cl3 size-205">
                                            Dimensions
                                        </span>

                                        <span class="stext-102 cl6 size-206">
                                            110 x 33 x 100 cm
                                        </span>
                                    </li>

                                    <li class="flex-w flex-t p-b-7">
                                        <span class="stext-102 cl3 size-205">
                                            Materials
                                        </span>

                                        <span class="stext-102 cl6 size-206">
                                            60% cotton
                                        </span>
                                    </li>

                                    <li class="flex-w flex-t p-b-7">
                                        <span class="stext-102 cl3 size-205">
                                            Color
                                        </span>

                                        <span class="stext-102 cl6 size-206">
                                            Black, Blue, Grey, Green, Red, White
                                        </span>
                                    </li>

                                    <li class="flex-w flex-t p-b-7">
                                        <span class="stext-102 cl3 size-205">
                                            Size
                                        </span>

                                        <span class="stext-102 cl6 size-206">
                                            XL, L, M, S
                                        </span>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>

                    <!-- - -->
                    <div class="tab-pane fade" id="reviews" role="tabpanel">
                        <div class="row">
                            <div class="col-sm-10 col-md-8 col-lg-6 m-lr-auto">
                                <div class="p-b-30 m-lr-15-sm">
                                    <!-- Review -->
                                    <div class="flex-w flex-t p-b-68">
                                        <div
                                            class="wrap-pic-s size-109 bor0 of-hidden m-r-18 m-t-6">
                                            <img src="images/avatar-01.jpg"
                                                alt="AVATAR">
                                        </div>

                                        <div class="size-207">
                                            <div
                                                class="flex-w flex-sb-m p-b-17">
                                                <span
                                                    class="mtext-107 cl2 p-r-20">
                                                    Ariana Grande
                                                </span>

                                                <span class="fs-18 cl11">
                                                    <i
                                                        class="zmdi zmdi-star"></i>
                                                    <i
                                                        class="zmdi zmdi-star"></i>
                                                    <i
                                                        class="zmdi zmdi-star"></i>
                                                    <i
                                                        class="zmdi zmdi-star"></i>
                                                    <i
                                                        class="zmdi zmdi-star-half"></i>
                                                </span>
                                            </div>

                                            <p class="stext-102 cl6">
                                                Quod autem in homine
                                                praestantissimum atque optimum
                                                est, id deseruit. Apud ceteros
                                                autem philosophos
                                            </p>
                                        </div>
                                    </div>

                                    <!-- Add review -->
                                    <form class="w-full">
                                        <h5 class="mtext-108 cl2 p-b-7">
                                            Add a review
                                        </h5>

                                        <p class="stext-102 cl6">
                                            Your email address will not be
                                            published. Required fields are
                                            marked *
                                        </p>

                                        <div
                                            class="flex-w flex-m p-t-50 p-b-23">
                                            <span class="stext-102 cl3 m-r-16">
                                                Your Rating
                                            </span>

                                            <span
                                                class="wrap-rating fs-18 cl11 pointer">
                                                <i
                                                    class="item-rating pointer zmdi zmdi-star-outline"></i>
                                                <i
                                                    class="item-rating pointer zmdi zmdi-star-outline"></i>
                                                <i
                                                    class="item-rating pointer zmdi zmdi-star-outline"></i>
                                                <i
                                                    class="item-rating pointer zmdi zmdi-star-outline"></i>
                                                <i
                                                    class="item-rating pointer zmdi zmdi-star-outline"></i>
                                                <input class="dis-none"
                                                    type="number" name="rating">
                                            </span>
                                        </div>

                                        <div class="row p-b-25">
                                            <div class="col-12 p-b-5">
                                                <label class="stext-102 cl3"
                                                    for="review">Your
                                                    review</label>
                                                <textarea
                                                    class="size-110 bor8 stext-102 cl2 p-lr-20 p-tb-10"
                                                    id="review"
                                                    name="review"></textarea>
                                            </div>

                                            <div class="col-sm-6 p-b-5">
                                                <label class="stext-102 cl3"
                                                    for="name">Name</label>
                                                <input
                                                    class="size-111 bor8 stext-102 cl2 p-lr-20"
                                                    id="name" type="text"
                                                    name="name">
                                            </div>

                                            <div class="col-sm-6 p-b-5">
                                                <label class="stext-102 cl3"
                                                    for="email">Email</label>
                                                <input
                                                    class="size-111 bor8 stext-102 cl2 p-lr-20"
                                                    id="email" type="text"
                                                    name="email">
                                            </div>
                                        </div>

                                        <button
                                            class="flex-c-m stext-101 cl0 size-112 bg7 bor11 hov-btn3 p-lr-15 trans-04 m-b-10">
                                            Submit
                                        </button>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="bg6 flex-c-m flex-w size-302 m-t-73 p-tb-15">
        <span class="stext-107 cl6 p-lr-25">
            SKU: JAK-01
        </span>

        <span class="stext-107 cl6 p-lr-25">
            Categories: Jacket, Men
        </span>
    </div>
</section>

<!-- Related Products -->
<section class="sec-relate-product bg0 p-t-45 p-b-105">
    <div class="container">
        <div class="p-b-45">
            <h3 class="ltext-106 cl5 txt-center">
                Related Products
            </h3>
        </div>

        <!-- Slide2 -->
        <div class="wrap-slick2">
            <div class="slick2">
                <div class="item-slick2 p-l-15 p-r-15 p-t-15 p-b-15">
                    <!-- Block2 -->
                    <div class="block2">
                        <div class="block2-pic hov-img0">
                            <img src="images/product-01.jpg" alt="IMG-PRODUCT">

                            <a href="#"
                                class="block2-btn flex-c-m stext-103 cl2 size-102 bg0 bor2 hov-btn1 p-lr-15 trans-04 js-show-modal1">
                                Quick View
                            </a>
                        </div>

                        <div class="block2-txt flex-w flex-t p-t-14">
                            <div class="block2-txt-child1 flex-col-l ">
                                <a href="product-detail.html"
                                    class="stext-104 cl4 hov-cl1 trans-04 js-name-b2 p-b-6">
                                    Esprit Ruffle Shirt
                                </a>

                                <span class="stext-105 cl3">
                                    $16.64
                                </span>
                            </div>

                            <div class="block2-txt-child2 flex-r p-t-3">
                                <a href="#"
                                    class="btn-addwish-b2 dis-block pos-relative js-addwish-b2">
                                    <img class="icon-heart1 dis-block trans-04"
                                        src="images/icons/icon-heart-01.png"
                                        alt="ICON">
                                    <img
                                        class="icon-heart2 dis-block trans-04 ab-t-l"
                                        src="images/icons/icon-heart-02.png"
                                        alt="ICON">
                                </a>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="item-slick2 p-l-15 p-r-15 p-t-15 p-b-15">
                    <!-- Block2 -->
                    <div class="block2">
                        <div class="block2-pic hov-img0">
                            <img src="images/product-02.jpg" alt="IMG-PRODUCT">

                            <a href="#"
                                class="block2-btn flex-c-m stext-103 cl2 size-102 bg0 bor2 hov-btn1 p-lr-15 trans-04 js-show-modal1">
                                Quick View
                            </a>
                        </div>

                        <div class="block2-txt flex-w flex-t p-t-14">
                            <div class="block2-txt-child1 flex-col-l ">
                                <a href="product-detail.html"
                                    class="stext-104 cl4 hov-cl1 trans-04 js-name-b2 p-b-6">
                                    Herschel supply
                                </a>

                                <span class="stext-105 cl3">
                                    $35.31
                                </span>
                            </div>

                            <div class="block2-txt-child2 flex-r p-t-3">
                                <a href="#"
                                    class="btn-addwish-b2 dis-block pos-relative js-addwish-b2">
                                    <img class="icon-heart1 dis-block trans-04"
                                        src="images/icons/icon-heart-01.png"
                                        alt="ICON">
                                    <img
                                        class="icon-heart2 dis-block trans-04 ab-t-l"
                                        src="images/icons/icon-heart-02.png"
                                        alt="ICON">
                                </a>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="item-slick2 p-l-15 p-r-15 p-t-15 p-b-15">
                    <!-- Block2 -->
                    <div class="block2">
                        <div class="block2-pic hov-img0">
                            <img src="images/product-03.jpg" alt="IMG-PRODUCT">

                            <a href="#"
                                class="block2-btn flex-c-m stext-103 cl2 size-102 bg0 bor2 hov-btn1 p-lr-15 trans-04 js-show-modal1">
                                Quick View
                            </a>
                        </div>

                        <div class="block2-txt flex-w flex-t p-t-14">
                            <div class="block2-txt-child1 flex-col-l ">
                                <a href="product-detail.html"
                                    class="stext-104 cl4 hov-cl1 trans-04 js-name-b2 p-b-6">
                                    Only Check Trouser
                                </a>

                                <span class="stext-105 cl3">
                                    $25.50
                                </span>
                            </div>

                            <div class="block2-txt-child2 flex-r p-t-3">
                                <a href="#"
                                    class="btn-addwish-b2 dis-block pos-relative js-addwish-b2">
                                    <img class="icon-heart1 dis-block trans-04"
                                        src="images/icons/icon-heart-01.png"
                                        alt="ICON">
                                    <img
                                        class="icon-heart2 dis-block trans-04 ab-t-l"
                                        src="images/icons/icon-heart-02.png"
                                        alt="ICON">
                                </a>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="item-slick2 p-l-15 p-r-15 p-t-15 p-b-15">
                    <!-- Block2 -->
                    <div class="block2">
                        <div class="block2-pic hov-img0">
                            <img src="images/product-04.jpg" alt="IMG-PRODUCT">

                            <a href="#"
                                class="block2-btn flex-c-m stext-103 cl2 size-102 bg0 bor2 hov-btn1 p-lr-15 trans-04 js-show-modal1">
                                Quick View
                            </a>
                        </div>

                        <div class="block2-txt flex-w flex-t p-t-14">
                            <div class="block2-txt-child1 flex-col-l ">
                                <a href="product-detail.html"
                                    class="stext-104 cl4 hov-cl1 trans-04 js-name-b2 p-b-6">
                                    Classic Trench Coat
                                </a>

                                <span class="stext-105 cl3">
                                    $75.00
                                </span>
                            </div>

                            <div class="block2-txt-child2 flex-r p-t-3">
                                <a href="#"
                                    class="btn-addwish-b2 dis-block pos-relative js-addwish-b2">
                                    <img class="icon-heart1 dis-block trans-04"
                                        src="images/icons/icon-heart-01.png"
                                        alt="ICON">
                                    <img
                                        class="icon-heart2 dis-block trans-04 ab-t-l"
                                        src="images/icons/icon-heart-02.png"
                                        alt="ICON">
                                </a>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="item-slick2 p-l-15 p-r-15 p-t-15 p-b-15">
                    <!-- Block2 -->
                    <div class="block2">
                        <div class="block2-pic hov-img0">
                            <img src="images/product-05.jpg" alt="IMG-PRODUCT">

                            <a href="#"
                                class="block2-btn flex-c-m stext-103 cl2 size-102 bg0 bor2 hov-btn1 p-lr-15 trans-04 js-show-modal1">
                                Quick View
                            </a>
                        </div>

                        <div class="block2-txt flex-w flex-t p-t-14">
                            <div class="block2-txt-child1 flex-col-l ">
                                <a href="product-detail.html"
                                    class="stext-104 cl4 hov-cl1 trans-04 js-name-b2 p-b-6">
                                    Front Pocket Jumper
                                </a>

                                <span class="stext-105 cl3">
                                    $34.75
                                </span>
                            </div>

                            <div class="block2-txt-child2 flex-r p-t-3">
                                <a href="#"
                                    class="btn-addwish-b2 dis-block pos-relative js-addwish-b2">
                                    <img class="icon-heart1 dis-block trans-04"
                                        src="images/icons/icon-heart-01.png"
                                        alt="ICON">
                                    <img
                                        class="icon-heart2 dis-block trans-04 ab-t-l"
                                        src="images/icons/icon-heart-02.png"
                                        alt="ICON">
                                </a>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="item-slick2 p-l-15 p-r-15 p-t-15 p-b-15">
                    <!-- Block2 -->
                    <div class="block2">
                        <div class="block2-pic hov-img0">
                            <img src="images/product-06.jpg" alt="IMG-PRODUCT">

                            <a href="#"
                                class="block2-btn flex-c-m stext-103 cl2 size-102 bg0 bor2 hov-btn1 p-lr-15 trans-04 js-show-modal1">
                                Quick View
                            </a>
                        </div>

                        <div class="block2-txt flex-w flex-t p-t-14">
                            <div class="block2-txt-child1 flex-col-l ">
                                <a href="product-detail.html"
                                    class="stext-104 cl4 hov-cl1 trans-04 js-name-b2 p-b-6">
                                    Vintage Inspired Classic
                                </a>

                                <span class="stext-105 cl3">
                                    $93.20
                                </span>
                            </div>

                            <div class="block2-txt-child2 flex-r p-t-3">
                                <a href="#"
                                    class="btn-addwish-b2 dis-block pos-relative js-addwish-b2">
                                    <img class="icon-heart1 dis-block trans-04"
                                        src="images/icons/icon-heart-01.png"
                                        alt="ICON">
                                    <img
                                        class="icon-heart2 dis-block trans-04 ab-t-l"
                                        src="images/icons/icon-heart-02.png"
                                        alt="ICON">
                                </a>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="item-slick2 p-l-15 p-r-15 p-t-15 p-b-15">
                    <!-- Block2 -->
                    <div class="block2">
                        <div class="block2-pic hov-img0">
                            <img src="images/product-07.jpg" alt="IMG-PRODUCT">

                            <a href="#"
                                class="block2-btn flex-c-m stext-103 cl2 size-102 bg0 bor2 hov-btn1 p-lr-15 trans-04 js-show-modal1">
                                Quick View
                            </a>
                        </div>

                        <div class="block2-txt flex-w flex-t p-t-14">
                            <div class="block2-txt-child1 flex-col-l ">
                                <a href="product-detail.html"
                                    class="stext-104 cl4 hov-cl1 trans-04 js-name-b2 p-b-6">
                                    Shirt in Stretch Cotton
                                </a>

                                <span class="stext-105 cl3">
                                    $52.66
                                </span>
                            </div>

                            <div class="block2-txt-child2 flex-r p-t-3">
                                <a href="#"
                                    class="btn-addwish-b2 dis-block pos-relative js-addwish-b2">
                                    <img class="icon-heart1 dis-block trans-04"
                                        src="images/icons/icon-heart-01.png"
                                        alt="ICON">
                                    <img
                                        class="icon-heart2 dis-block trans-04 ab-t-l"
                                        src="images/icons/icon-heart-02.png"
                                        alt="ICON">
                                </a>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="item-slick2 p-l-15 p-r-15 p-t-15 p-b-15">
                    <!-- Block2 -->
                    <div class="block2">
                        <div class="block2-pic hov-img0">
                            <img src="images/product-08.jpg" alt="IMG-PRODUCT">

                            <a href="#"
                                class="block2-btn flex-c-m stext-103 cl2 size-102 bg0 bor2 hov-btn1 p-lr-15 trans-04 js-show-modal1">
                                Quick View
                            </a>
                        </div>

                        <div class="block2-txt flex-w flex-t p-t-14">
                            <div class="block2-txt-child1 flex-col-l ">
                                <a href="product-detail.html"
                                    class="stext-104 cl4 hov-cl1 trans-04 js-name-b2 p-b-6">
                                    Pieces Metallic Printed
                                </a>

                                <span class="stext-105 cl3">
                                    $18.96
                                </span>
                            </div>

                            <div class="block2-txt-child2 flex-r p-t-3">
                                <a href="#"
                                    class="btn-addwish-b2 dis-block pos-relative js-addwish-b2">
                                    <img class="icon-heart1 dis-block trans-04"
                                        src="images/icons/icon-heart-01.png"
                                        alt="ICON">
                                    <img
                                        class="icon-heart2 dis-block trans-04 ab-t-l"
                                        src="images/icons/icon-heart-02.png"
                                        alt="ICON">
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<%- include("../partials/userpartials/footer.ejs") %>

<script>
    function changeColor(){
    const selectElement = document.getElementById('colorSelect');
    const selectedOption = selectElement.options[selectElement.selectedIndex];
    const value = selectElement.value;
    const option = document.getElementById('selectColor');
  
    const selectedColor = selectedOption.value;
    const selectedParam = selectedOption.getAttribute('data-param');
console.log(selectedParam)
        window.location.href = `/productDetail?variantId=${selectedParam}`
        option.textContent = value;
}
</script>

<script>
    function changePrice() {
        const selectElement = document.getElementById('productSelect');
        const addToCartButton = document.querySelector('.js-addcart-detail');
        const outOfStockMessage = document.getElementById('outOfStockMessage');
        const selectedOption = selectElement.options[selectElement.selectedIndex];
        const selectedQuantity = selectedOption.getAttribute('data-quantity');
    
    
        if (selectedQuantity > 0) {
            addToCartButton.style.display = 'inline-block';
            outOfStockMessage.style.display = 'none';
            addToCartButton.disabled = false;
            addToCartButton.textContent = "Add to cart";
        } else {
            addToCartButton.style.display = 'none';
            outOfStockMessage.style.display = 'block';
            outOfStockMessage.textContent = "This size is out of stock";
        }
    }
    

    window.onload = changePrice;
    


    async function addToCart(vId) {
        const size = $("#productSelect option:selected").text();

        const data = {
            variantId: vId,
            size: size
        };

        try {
            const response = await fetch("/addToCart", {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(data)
            });

            if (!response.ok) {
                throw new Error('Network response was not ok ' + response.statusText);
            }

            const responseData = await response.json();
            
            if (responseData.success){
                Swal.fire({
                    title: 'Success!',
                    text: `The item was ${responseData.success} to your cart.`,
                    icon: 'success'
                });
            }else if (responseData.fail){
                Swal.fire({
                    title: `${responseData.fail}`,
                    icon: 'warning'
                });
            }

            

        } catch (error) {
            
            window.location.href = "/"

        }

    }

    function addToWishOrRemove(variantId, event) {
        event.preventDefault(); // Prevent default action if necessary
        
        // Get the icon element within the button
        const iconElement = event.currentTarget.querySelector('i');
    
        fetch('/wishlist/add', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
                'Accept': 'application/json'
            },
            body: JSON.stringify({ variantId: variantId })
        })
        .then(response => response.json())
        .then(data => {
            if (data.success) {
                iconElement.style.color = 'red';
                Swal.fire({
                    icon: 'success',
                    title: 'Added to Wishlist',
                    text: data.message,
                    confirmButtonText: 'OK'
                });
            } else if (data.exists) {
                Swal.fire({
                    title: 'Already in Wishlist',
                    text: data.message,
                    icon: 'question',
                    showCancelButton: true,
                    confirmButtonText: 'Yes,',
                    cancelButtonText: 'No,'
                }).then((result) => {
                    if (result.isConfirmed) {
                        // Send another fetch to remove the item from the wishlist
                        fetch('/wishlist/remove', {
                            method: 'POST',
                            headers: {
                                'Content-Type': 'application/json',
                                'Accept': 'application/json'
                            },
                            body: JSON.stringify({ variantId: variantId })
                        })
                        .then(response => response.json())
                        .then(removeData => {
                            if (removeData.success) {
                                iconElement.style.color = '';
                                Swal.fire({
                                    icon: 'success',
                                    title: 'Removed from Wishlist',
                                    text: removeData.message,
                                    confirmButtonText: 'OK'
                                });
                            } else {
                                Swal.fire({
                                    icon: 'error',
                                    title: 'Error',
                                    text: removeData.message,
                                    confirmButtonText: 'OK'
                                });
                            }
                        })
                        .catch(error => {
                            console.error('Error:', error);
                            Swal.fire({
                                icon: 'error',
                                title: 'Error',
                                text: 'An error occurred while removing from wishlist.',
                                confirmButtonText: 'OK'
                            });
                        });
                    }
                });
            } else {
                Swal.fire({
                    icon: 'error',
                    title: 'Error',
                    text: data.message,
                    confirmButtonText: 'OK'
                });
            }
        })
        .catch(error => {
            console.error('Error:', error);
            Swal.fire({
                icon: 'error',
                title: 'Error',
                text: 'An error occurred while adding to wishlist.',
                confirmButtonText: 'OK'
            });
        });
    }
    

    document.querySelectorAll('.zoom-image').forEach((zoomImage) => {
    const zoomLens = zoomImage.parentElement.querySelector('.zoom-lens');

    zoomImage.addEventListener('mousemove', (e) => {
        const rect = zoomImage.getBoundingClientRect();
        const x = e.clientX - rect.left; 
        const y = e.clientY - rect.top;  

        // Calculate the position of the lens
        const lensX = Math.max(0, Math.min(x - zoomLens.offsetWidth / 2, rect.width - zoomLens.offsetWidth));
        const lensY = Math.max(0, Math.min(y - zoomLens.offsetHeight / 2, rect.height - zoomLens.offsetHeight));

        // Set lens position
        zoomLens.style.left = lensX + 'px';
        zoomLens.style.top = lensY + 'px';
        zoomLens.style.display = 'block';

        zoomLens.style.backgroundImage = `url('${zoomImage.src}')`;
        zoomLens.style.backgroundSize = `${zoomImage.width * 2}px ${zoomImage.height * 2}px`; 
        zoomLens.style.backgroundPosition = `-${lensX * 2}px -${lensY * 2}px`; 
    });

    zoomImage.addEventListener('mouseleave', () => {
        zoomLens.style.display = 'none';
    });
});



    
</script>